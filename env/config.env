# Pipeline configuration (edit paths before running)

# Required input
FASTQ_ROOT="/path/to/fastqs"

# AmbiQuant
AMBIQUANT_REPO=""
# Optional: if set, AmbiQuant runs inside this micromamba/conda env
AMBIQUANT_ENV=""
MICROMAMBA_BIN="micromamba"

# Tools
CELLRANGER_BIN="cellranger"
PYTHON_BIN="python3"
R_BIN="Rscript"

# Outputs (default to writable locations under this pipeline directory)
CELLRANGER_REF_ROOT="${PIPELINE_ROOT}/outputs/refdata"
CELLRANGER_OUT_ROOT="${PIPELINE_ROOT}/outputs/cellranger"
QC_OUT_ROOT="${PIPELINE_ROOT}/outputs/qc"
# Optional: SHA256 for the 10x reference tarball
REF_TGZ_SHA256=""

# Resources
CELLRANGER_CORES=10
CELLRANGER_MEM_GB=80
# Set true for snRNA-seq, false for scRNA-seq
CELLRANGER_INCLUDE_INTRONS=true

# DoubletFinder
DOUBLETFINDER_RATE=auto
DOUBLETFINDER_CHEMISTRY=""
DOUBLETFINDER_NPCS=30
DOUBLETFINDER_MIN_FEATURES=200
DOUBLETFINDER_MIN_CELLS=3
# Leave empty to skip MT filtering
DOUBLETFINDER_MAX_PERCENT_MT=
DOUBLETFINDER_SEED=1

# Seurat clustering for SoupX (no filtering)
SEURAT_NPCS=30
SEURAT_RESOLUTION=0.5
SEURAT_NFEATURES=2000
SEURAT_SEED=1

# Final Seurat subsetting + normalization/clustering
SEURAT_FINAL_OUT="${PIPELINE_ROOT}/outputs/qc/seurat_qc"
SEURAT_FINAL_USE_SOUPX=true
SEURAT_FINAL_REQUIRE_EMPTYDROPS=true
SEURAT_FINAL_REQUIRE_DROPLETQC=true
SEURAT_FINAL_NPCS=30
SEURAT_FINAL_RESOLUTION=0.5
SEURAT_FINAL_SEED=1
SEURAT_FINAL_MIN_CELLS=3
SEURAT_FINAL_MIN_FEATURES=200
SEURAT_FINAL_REGRESS=false
SEURAT_FINAL_REGRESS_CELL_CYCLE=false
SEURAT_FINAL_MAX_PERCENT_MT=
SEURAT_FINAL_MAX_PERCENT_RIBO=
SEURAT_FINAL_BASIC_MIN_FEATURES=

# CellMarker2.0 annotation
CELL_MARKER_XLSX="${PIPELINE_ROOT}/resources/Cell_marker_Seq_human.xlsx"
CELL_MARKER_TISSUES="blood,bone,embryonic brain,dorsal root ganglion,embryonic stem cell,epithelium,lung,bone marrow,cartilage,skeletal muscle,adipose tissue,blood vessel,skin,embryo"
CELL_MARKER_MIN_GENES=5
CELL_MARKER_CTRL=20
CELL_MARKER_SEED=1
SEURAT_ANNOTATE_OUT="${PIPELINE_ROOT}/outputs/annotation_integration/seurat_annotation_integration"
SEURAT_DO_INTEGRATION=true
SEURAT_INTEGRATION_NPCS=30
SEURAT_INTEGRATION_RESOLUTION=0.5
EWING_SIGNATURE_CSV="${PIPELINE_ROOT}/resources/Aynaud.csv"
CELLTYPE_GROUPING_FILE="${PIPELINE_ROOT}/resources/celltype_grouping.txt"
CELLTYPE_GROUPING_PERCENTILE=0.99
CELLTYPE_GROUPING_MIN_MOD_FRAC=0.40
CELLTYPE_GROUPING_MIN_MOD_CELLS=10
CELLTYPE_GROUPING_AZ_LINEAGE_MIN=0.60
CELLTYPE_GROUPING_AZ_LINEAGE_DELTA=0.07
